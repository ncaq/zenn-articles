---
title: "Windows & Mac VSCode同期戦略"
emoji: "🔄"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["vscode", "windows", "mac"]
published: false
---

# はじめに

昨年、`VSCode` で `version 1.48` から安定版(Stable)でも設定同期機能(Settings Sync)が使えるようになり話題となりました。
VSCode には、Stable 版と、Inseders 版という２つの開発バージョンがあります。Insiders 版で先に新機能が試験的に搭載され、安定したら Stable 版にも追加されるといった形で開発が進められています。

普段、私達がよく目にするのは Stable 版となり、安定版と呼ばれています。

![VSCodeのアイコン画像](https://storage.googleapis.com/zenn-user-upload/tgrrxh4oo27xz99wxxw1tcfb5vuh)
*右がStable版、左がInsiders版のアイコン*

VSCode 公式が設定同期機能を実装し話題になりましたが、今まで拡張機能に設定同期する拡張機能は存在していました。

しかし、私は当時メインマシンである Windows で主に開発していたため、同期の拡張機能については全く触れていませんでした。昨年末に、開発用に M1 チップを搭載した Macbook Pro をお迎えしたのですが、開発環境を構築する上で小さな葛藤がありました。小さな問題ですが、設定の方法が分からず解決まで時間がかかったため、備忘録としてまとめます。

# 何が問題だったのか

VSCode の設定をしているときにしたツイートです。

https://twitter.com/Ry86163204/status/1339206380914237442?s=20

ツイート内の情報がかなり乏しく、なんのことか伝わりにくいですが、MacBook の環境構築をする際に CPU のアーキテクチャが変わったことで VSCode の環境も大きく変わりました。

## MacBookのCPUアーキテクチャ問題

昨年末発売された MacBook Air、MacBook Pro、Mac mini は、従来の CPU(Intel 製)ではなく、Apple が独自開発した CPU(通称: M1 チップ)が搭載されています。このことにより、CPU のアーキテクチャが `ARM` に置き換わったため、従来の Intel ベースのアプリを動かすために `Rosetta2` という変換ツールを介してアプリを動かすことになります。

`M1 Macに最適化` という言葉をよく聞くようになりましたが、これはアプリが `ARMアーキテクチャ` に対応し、特別な変換などをしなくともネイティブに動くようになったという意味になります。ネイティブというだけあり、パーフォーマンスやメモリの使用量などもかなり改善され、M1 チップのパワーを最大限に活用できるイメージです。

記事執筆時点(2021-02-09 現在)では、VSCode(安定版)はまだ M1 Mac に完全対応しておらず、Intel アーキテクチャで動作している状態です。

## VSCode Insidersをインストール

せっかく M1 チップ搭載 Mac になったので、ネイティブなアプリを使いたいという思いから私は迷わず Insiders 版をインストールしました。
~~ここで素直に Stable 版を入れれば詰まることはなかったはずですが...。~~

ここで同期がうまくできない問題に遭遇しました。Windows 版の VSCode は Stable 版を使っており、設定の同期機能をオンにしました。
続いて MacBook にインストールした Insiders 版で同期しようとしたのですが上手く、同期できませんでした。
ここでつまづき、今日に至るまで MacBook で開発するときは、Windows 版で使っていた拡張機能を１つずつ確認してインストールし、環境を合わせながら使っておりました。正直これはかなり面倒な作業で、「拡張機能も公式の同期機能で使えるのであれば、今すぐにでも使いたい」そんな思いをしながら渋々MacBook の VSCode(Insiders)を使っていました。最初はパフォーマンス面で不安定な部分もありましたが、アップデートが積み重なり、今ではパフォーマンス面でかなり満足しています。

# 解決策

同期がうまくできないこと以外に関しては満足して今日まで使ってきました。そろそろ Stable 版も ARM アーキテクチャ対応版がでるといった話が流れ始めた頃、VSCode の公式ドキュメントを眺めていたら Stable 版と Insider 版で設定の同期ができるとのトピックがあり、試したところ上手くいきました。

## Windows側で設定同期機能をオンにする

VSCode 公式の設定同期機能はこちらからオンにできます。

![設定同期をオンにする様子](https://storage.googleapis.com/zenn-user-upload/nzyepfjno7qulnoaiuuffk0nj6c9)
*左下の設定アイコンクリックでメニューが現れます*

同期する設定を選択するウインドウが現れるので選択します。デフォルトで全てオンになっています。
![同期する項目を選択する様子](https://storage.googleapis.com/zenn-user-upload/uo73sd23a1x1pxzwonx9r3cc3d53)
:::message
ショートカットキーは各プラットフォームごとに管理されるようです
:::
右上の `サインインしてオンにする` からアカウントへログインします。
サインインには `Microsoftアカウント` もしくは `GitHubアカウント` のどちらかが必要になります。

![使用するアカウントの選択画面](https://storage.googleapis.com/zenn-user-upload/zddtezfrdvcj9hbbfm7hj0zaqh3y)
*私はGithubアカウントでサインインしました*

右下に成功のメッセージが表示されたらうまくクラウドに保存できています。
以上で同期する側の設定は終わりです。

# おわりに